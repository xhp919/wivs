(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f3b0600a"],{"00e9":function(t,e,n){"use strict";var i=n("df56"),a=n.n(i);a.a},"13be":function(t,e,n){"use strict";var i=n("6e2d"),a=n.n(i);a.a},"1fc5":function(t,e,n){"use strict";var i=n("a51c"),a=n.n(i);a.a},"22af":function(t,e,n){"use strict";var i=n("6cd5"),a=n.n(i);a.a},"2d19":function(t,e,n){"use strict";var i=n("8293"),a=n.n(i);a.a},"30aa":function(t,e,n){},"4d3f":function(t,e,n){"use strict";var i=n("30aa"),a=n.n(i);a.a},"6c48":function(t,e,n){"use strict";var i=n("a10b"),a=n.n(i);a.a},"6cd5":function(t,e,n){},"6e2d":function(t,e,n){},8293:function(t,e,n){},"86c0":function(t,e,n){"use strict";var i=n("dc6e"),a=n.n(i);a.a},"8bc2":function(t,e,n){"use strict";var i=n("f714"),a=n.n(i);a.a},a10b:function(t,e,n){},a51c:function(t,e,n){},a5bf:function(t,e,n){},b6eb:function(t,e,n){"use strict";var i=n("a5bf"),a=n.n(i);a.a},bafa:function(t,e,n){},dc6e:function(t,e,n){},df56:function(t,e,n){},f714:function(t,e,n){},fa59:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("map-table")],1)},a=[],c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"MapTablePhone"},[n("div",{attrs:{id:"mapPhone"}})])}],s=(n("d81d"),n("5bc0"),n("8bba")),r=n("157c"),l=(n("bafa"),n("e29f")),u=n("9d47"),h=n("020f"),d=n("a568"),f=n("c6fd"),p=n("ef60"),m=n("5831"),v=n("f53f"),b=n("4cdf"),g=n("6c77"),y=n("ce2c"),k=n("83a6"),T=n("8682"),w=n("256f"),_=n("b08a"),O=n("f822"),C=n("f403"),I=n("2b0e"),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"dialog",staticClass:"DialogPhone"},[n("button",{ref:"buttonShow",staticClass:"DialogPhone-buttonShow",attrs:{title:t.buttonShowTitle},on:{click:t.switchDialog}},[n("span",{domProps:{innerHTML:t._s(t.buttonShowHtml)}})]),n("div",{staticClass:"DialogPhone-Content"},[n("rain"),n("cloud"),n("radar"),n("wind"),n("pressure")],1)])},S=[],j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"DialogPhone-Content-Rain"},[t._m(0),n("div",[n("div",[n("input",{attrs:{type:"checkbox",value:"rain"},domProps:{checked:t.checked24},on:{click:t.is24Checked}}),n("span",[t._v("24小时")])]),n("div",[n("input",{attrs:{type:"checkbox",value:"rain"},domProps:{checked:t.checked48},on:{click:t.is48Checked}}),n("span",[t._v("48小时")])]),n("div",[n("input",{attrs:{type:"checkbox",value:"rain"},domProps:{checked:t.checked72},on:{click:t.is72Checked}}),n("span",[t._v("72小时")])])])])},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",[t._v("降水预报")])])}],E=(n("99af"),n("e462")),D=n("7544"),L=n("e4d7"),$={data:function(){return{checked24:!1,checked48:!1,checked72:!1,rainOpacity:.5}},computed:{MapTable:function(){return this.$warehouse.compInstances.MapTablePhone}},mounted:function(){this.MapTable.layers.rainLayer.setOpacity(this.rainOpacity)},methods:{is24Checked:function(){this.checked24?(Object(E["a"])(this),this.checked24=!1):(this.getRainJson("24",this.callback),this.checked24=!0,this.checked48=!1,this.checked72=!1)},is48Checked:function(){this.checked48?(Object(E["a"])(this),this.checked48=!1):(this.getRainJson("48",this.callback),this.checked48=!0,this.checked24=!1,this.checked72=!1)},is72Checked:function(){this.checked72?(Object(E["a"])(this),this.checked72=!1):(this.getRainJson("72",this.callback),this.checked72=!0,this.checked48=!1,this.checked24=!1)},getRainJson:function(t,e){Object(L["a"])("".concat(this.$wivsConfig.rain.api,"/").concat(t),e)},callback:function(t){var e=JSON.parse(t.contours);Object(D["a"])(this,e)}}},M=$,G=(n("b6eb"),n("2877")),H=Object(G["a"])(M,j,x,!1,null,"560e2895",null),R=H.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"DialogPhone-Content-Cloud"},[n("div",[n("span",[t._v("卫星云图")]),n("span",{staticStyle:{"margin-left":"0.5em"},domProps:{innerHTML:t._s(t.cloudInfo)}})]),n("div",[n("div",[n("input",{attrs:{type:"checkbox",value:"cloud"},domProps:{checked:t.checked},on:{click:t.isChecked}}),n("span",[t._v("最新云图")])]),n("div",[n("input",{attrs:{type:"button",value:"播放"},on:{click:t.getClouds}})]),n("div",[n("input",{attrs:{type:"button",value:"暂停"},on:{click:t.stop}})])])])},V=[],W=(n("a4d3"),n("e01a"),n("d28b"),n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("6a6b")),J=n("e7df"),z={data:function(){return{checked:!1,cloudInfo:"",cloudOpacity:.7,imgs:[],timer:null,counter:0}},computed:{MapTable:function(){return this.$warehouse.compInstances.MapTablePhone}},mounted:function(){this.MapTable.layers.cloudLayer.setOpacity(this.cloudOpacity)},methods:{isChecked:function(){this.checkded?(this.checkded=!1,this.stop(),this.counter=0,this.clearLayer(),this.cloudInfo=""):(this.checkded=!0,this.getCloud())},getCloud:function(){var t=this;Object(W["a"])("get",this.$wivsConfig.cloud.api,(function(e){var n=JSON.parse(e.responseText),i="https://tf.istrongcloud.com".concat(n.radarCloud.cloudUrl),a=n.radarCloud.cloudRange;Object(W["a"])("get",i,(function(e){var n=JSON.parse(e.responseText),i=n[n.length-1].name,c=n[n.length-1].url,o=t.MapTable.layers.cloudLayer;o.setSource(new J["a"]({url:c,projection:"EPSG:3857",imageExtent:w["o"]([a[0][1],a[0][0],a[1][1],a[1][0]],"EPSG:4326","EPSG:3857")})),o.setVisible(!0),t.cloudInfo="".concat(i.substring(0,4),"/").concat(i.substring(4,6),"/").concat(i.substring(6,8)," ").concat(i.substring(8,10),":").concat(i.substring(10,12))}))}))},getClouds:function(){var t=this;this.checkded&&null===this.timer&&Object(W["a"])("get",this.$wivsConfig.cloud.api,(function(e){var n=JSON.parse(e.responseText),i="https://tf.istrongcloud.com".concat(n.radarCloud.cloudUrl),a=n.radarCloud.cloudRange;Object(W["a"])("get",i,(function(e){var n=JSON.parse(e.responseText),i=t.MapTable.layers.cloudLayer;i.setVisible(!0);var c=!0,o=!1,s=void 0;try{for(var r,l=n[Symbol.iterator]();!(c=(r=l.next()).done);c=!0){var u=r.value,h=new J["a"]({url:u.url,projection:"EPSG:3857",imageExtent:w["o"]([a[0][1],a[0][0],a[1][1],a[1][0]],"EPSG:4326","EPSG:3857")});t.imgs.push({name:u.name,source:h})}}catch(d){o=!0,s=d}finally{try{c||null==l.return||l.return()}finally{if(o)throw s}}t.timer=setInterval((function(){t.counter>t.imgs.length-1&&(t.counter=0),i.setSource(t.imgs[t.counter].source),t.cloudInfo="".concat(t.imgs[t.counter].name.substring(0,4),"/").concat(t.imgs[t.counter].name.substring(4,6),"/").concat(t.imgs[t.counter].name.substring(6,8)," ").concat(t.imgs[t.counter].name.substring(8,10),":").concat(t.imgs[t.counter].name.substring(10,12)),t.counter<t.imgs.length-1?t.counter++:t.counter=0}),200)}))}))},stop:function(){clearInterval(this.timer),this.timer=null},clearLayer:function(){var t=this.MapTable.layers.cloudLayer;t.setVisible(!1)}}},N=z,B=(n("6c48"),Object(G["a"])(N,A,V,!1,null,"16c9916e",null)),F=B.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"DialogPhone-Content-Radar"},[n("div",[n("span",[t._v("气象雷达")]),n("span",{staticStyle:{"margin-left":"0.5em"},domProps:{innerHTML:t._s(t.radarInfo)}})]),n("div",[n("div",[n("input",{attrs:{type:"checkbox",value:"radar"},domProps:{checked:t.checkded},on:{click:t.isChecked}}),n("span",[t._v("最新雷达")])]),n("div",[n("input",{attrs:{type:"button",value:"播放"},on:{click:t.getRadars}})]),n("div",[n("input",{attrs:{type:"button",value:"暂停"},on:{click:t.stop}})])])])},Y=[],q={data:function(){return{checkded:!1,radarInfo:"",radarOpacity:1,imgs:[],timer:null,counter:0}},computed:{MapTable:function(){return this.$warehouse.compInstances.MapTablePhone}},mounted:function(){this.MapTable.layers.radarLayer.setOpacity(this.radarOpacity)},methods:{isChecked:function(){this.checkded?(this.checkded=!1,this.stop(),this.counter=0,this.clearLayer(),this.radarInfo=""):(this.checkded=!0,this.getRadar())},getRadar:function(){var t=this;Object(W["a"])("get",this.$wivsConfig.radar.api,(function(e){var n=JSON.parse(e.responseText),i="https://tf.istrongcloud.com".concat(n.radarCloud.radarUrl),a=n.radarCloud.radarRange;Object(W["a"])("get",i,(function(e){var n=JSON.parse(e.responseText),i=n[n.length-1].name,c=n[n.length-1].url,o=t.MapTable.layers.radarLayer;o.setSource(new J["a"]({url:c,projection:"EPSG:3857",imageExtent:w["o"]([a[0][1],a[0][0],a[1][1],a[1][0]],"EPSG:4326","EPSG:3857")})),o.setVisible(!0),t.radarInfo="".concat(i.substring(0,4),"/").concat(i.substring(4,6),"/").concat(i.substring(6,8)," ").concat(i.substring(8,10),":").concat(i.substring(10,12))}))}))},getRadars:function(){var t=this;this.checkded&&null===this.timer&&Object(W["a"])("get",this.$wivsConfig.radar.api,(function(e){var n=JSON.parse(e.responseText),i="https://tf.istrongcloud.com".concat(n.radarCloud.radarUrl),a=n.radarCloud.radarRange;Object(W["a"])("get",i,(function(e){var n=JSON.parse(e.responseText),i=t.MapTable.layers.radarLayer;i.setVisible(!0);var c=!0,o=!1,s=void 0;try{for(var r,l=n[Symbol.iterator]();!(c=(r=l.next()).done);c=!0){var u=r.value,h=new J["a"]({url:u.url,projection:"EPSG:3857",imageExtent:w["o"]([a[0][1],a[0][0],a[1][1],a[1][0]],"EPSG:4326","EPSG:3857")});t.imgs.push({name:u.name,source:h})}}catch(d){o=!0,s=d}finally{try{c||null==l.return||l.return()}finally{if(o)throw s}}t.timer=setInterval((function(){t.counter>t.imgs.length-1&&(t.counter=0),i.setSource(t.imgs[t.counter].source),t.radarInfo="".concat(t.imgs[t.counter].name.substring(0,4),"/").concat(t.imgs[t.counter].name.substring(4,6),"/").concat(t.imgs[t.counter].name.substring(6,8)," ").concat(t.imgs[t.counter].name.substring(8,10),":").concat(t.imgs[t.counter].name.substring(10,12)),t.counter<t.imgs.length-1?t.counter++:t.counter=0}),200)}))}))},stop:function(){clearInterval(this.timer),this.timer=null},clearLayer:function(){var t=this.MapTable.layers.radarLayer;t.setVisible(!1)}}},Z=q,K=(n("fc96"),Object(G["a"])(Z,U,Y,!1,null,"b80ede4e",null)),Q=K.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"DialogPhone-Content-Wind"},[n("div",[n("span",[t._v("风场")]),n("span",{staticStyle:{"margin-left":"0.5em"},domProps:{innerHTML:t._s(t.windInfo)}})]),n("div",[n("div",[n("input",{attrs:{type:"checkbox",value:"radar"},domProps:{checked:t.checkedDynamic},on:{click:t.isDyWindChecked}}),n("span",[t._v("动态风场")])]),n("div",[n("input",{attrs:{type:"checkbox",value:"radar"},domProps:{checked:t.checkedStatic},on:{click:t.isStWindChecked}}),n("span",[t._v("风向风速")])])])])},tt=[],et=(n("a434"),n("3835")),nt=n("5ff5"),it=n("46be"),at=n("88c4"),ct=n("6e73"),ot=n("26de"),st=n("4b07"),rt=n("5a28"),lt=n("0414a"),ut=n("6e0d"),ht={data:function(){return{windData:null,uData:null,vData:null,time1:null,checkedDynamic:!1,checkedStatic:!1,windInfo:"",windPoints:[],stop:null,lng1:null,lat1:null,lng2:null,lat2:null,lng1_:null,lat1_:null,lng2_:null,lat2_:null}},computed:{MapTable:function(){return this.$warehouse.compInstances.MapTablePhone},canvas:function(){return this.MapTable.layers.WindCanvas},ctx:function(){return this.canvas.getContext("2d")}},mounted:function(){var t=this;this.$warehouse.compInstances.WindTable=this;var e=this.MapTable.map,n=null;e.on("moveend",(function(){var i=Math.floor(w["n"](e.getView().getCenter(),"EPSG:3857","EPSG:4326")[0]),a=Math.floor(w["n"](e.getView().getCenter(),"EPSG:3857","EPSG:4326")[1]);t.lng1=i-86,t.lat1=a-44,t.lat1>85&&(t.lat1=85),t.lat1<85&&(t.lat1=-85),t.lng2=i+86,t.lat2=a+44,t.lat2>85&&(t.lat2=85),t.lat2<-85&&(t.lat2=-85);var c=w["o"](e.getView().calculateExtent(e.getSize()),"EPSG:3857","EPSG:4326");t.lng1_=c[0],t.lat1_=c[1],t.lng2_=c[2],t.lat2_=c[3],t.checkedStatic&&null===n&&t.creStaWind(t.windData)})),e.on("movestart",(function(){t.checkedStatic&&t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height)})),e.getView().on("change:resolution",(function(){t.checkedStatic&&4!==e.getView().getZoom()&&22!==e.getView().getZoom()&&t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height)})),e.on("change:size",(function(i){clearTimeout(n);var a=e.getSize();t.canvas.width=a[0],t.canvas.height=a[1],n=setTimeout((function(){t.checkedStatic&&(t.creStaWind(t.windData),clearTimeout(n),n=null)}),30)}))},methods:{isDyWindChecked:function(){var t=this;if(this.checkedDynamic)window.cancelAnimationFrame(this.stop),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.checkedDynamic=!1,this.windInfo="";else{this.checkedDynamic=!0;var e=(new Date).getMinutes();!this.checkedStatic||e-this.time1>=10?this.$axios({method:"get",url:this.$wivsConfig.wind.api}).then((function(e){t.windData=e.data,t.time1=(new Date).getMinutes(),t.startWind()})):this.startWind()}},isStWindChecked:function(){var t=this;if(this.checkedStatic)this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.checkedStatic=!1,this.windInfo="";else{this.checkedStatic=!0,window.cancelAnimationFrame(this.stop);var e=(new Date).getMinutes();!this.checkedDynamic||e-this.time1>=10?this.$axios({method:"get",url:this.$wivsConfig.wind.api}).then((function(e){t.windData=e.data,t.time1=(new Date).getMinutes(),t.creStaWind()})):this.creStaWind()}},startWind:function(){var t=this;this.checkedStatic=!1,this.windInfo="";var e=this.windData,n=this.lng1,i=this.lng2,a=this.lat1,c=this.lat2,o=Object(it["a"])(e);this.windInfo=o[0],this.uData=o[1],this.vData=o[2];for(var s=[],r=[],l=[],u=[],h=0;h<1e3;h++){var d=[Object(nt["a"])("[",n,i,"]",!1),Object(nt["a"])("[",a,c,"]",!1)];s.push(d),r.push(0),l.push(Object(nt["a"])("[",20,50,"]",!0)),u.push([this.transform4_3(d)])}var f=function e(){for(var n in u)t.createWind(n,t.uData,t.vData,s,u,r,l);t.draw(u),t.stop=window.requestAnimationFrame(e)};this.stop=window.requestAnimationFrame(f)},createWind:function(t,e,n,i,a,c,o){c[t]=c[t]+1;var s=Object(at["a"])(i[t])[0],r=Object(at["a"])(i[t])[1],l=Object(ct["a"])(i[t],s,r,e,n),u=Object(ot["a"])(i[t],l[0],l[1],4e3);if(a[t].push(this.transform4_3(u)),c[t]===o[t]){var h=this.lng1,d=this.lng2,f=this.lat1,p=this.lat2;i[t]=[Object(nt["a"])("[",h,d,"]",!1),Object(nt["a"])("[",f,p,"]",!1)],c[t]=0,o[t]=Object(nt["a"])("[",20,50,"]",!0),a[t]=[this.transform4_3(i[t])]}else i[t]=u},creStaWind:function(){var t=this.MapTable.map;this.checkedDynamic=!1,this.windInfo="";var e=this.windData;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var n=this.lng1_,i=this.lng2_,a=this.lat1_,c=this.lat2_,o=Object(it["a"])(e);this.windInfo=o[0],this.uData=o[1],this.vData=o[2];for(var s=i-n,r=c-a,l=t.getSize()[0],u=t.getSize()[1],h=Math.floor(l/26),d=Math.floor(u/23),f=0;f<=h;f++)for(var p=0;p<=d;p++){var m=[n+s/h*f,a+r/d*p],v=Object(at["a"])(m),b=Object(et["a"])(v,2),g=b[0],y=b[1],k=Object(ct["a"])(m,g,y,this.uData,this.vData),T=Object(st["a"])(k),w=Object(rt["a"])(T),_=Object(lt["a"])(k),O=this.coordToPixel(this.transform4_3(m));Object(ut["a"])(this.ctx,O,_,w)}},draw:function(t){var e,n=this.canvas,i=this.ctx,a=this.MapTable.currentLayer;for(var c in e=a?"rgb(0, 60, 136)":"rgb(235, 235, 235)",i.clearRect(0,0,n.width,n.height),i.lineCap="round",i.lineWidth=.7,i.strokeStyle=e,t){i.beginPath(),t[c].length>20&&t[c].splice(0,1);for(var o=t[c],s=0;s<o.length;s++){var r=o[s];r=this.coordToPixel(r),0===s?i.moveTo(r[0],r[1]):i.lineTo(r[0],r[1])}i.stroke()}},transform4_3:function(t){return w["n"](t,"EPSG:4326","EPSG:3857")},transform3_4:function(t){return w["n"](t,"EPSG:3857","EPSG:4326")},coordToPixel:function(t){var e=this.MapTable.map;return e.getPixelFromCoordinate(t)}}},dt=ht,ft=(n("00e9"),Object(G["a"])(dt,X,tt,!1,null,"fb768868",null)),pt=ft.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"DialogPhone-Content-Pressure"},[t._m(0),n("div",[n("div",[n("input",{attrs:{type:"checkbox"},domProps:{checked:t.checked},on:{click:t.isChecked}}),n("span",[t._v("大气气压")])])])])},vt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",[t._v("气压")])])}],bt=n("a17b"),gt=n("99ec"),yt={data:function(){return{checked:!1,pressureInfo:""}},computed:{MapTable:function(){return this.$warehouse.compInstances.MapTablePhone}},methods:{isChecked:function(){this.checked?(Object(bt["a"])(this),this.pressureInfo="",this.checked=!1):(this.checked=!0,this.getPressureJson(this.callback))},getPressureJson:function(t){this.$axios({method:"get",url:"".concat(this.$wivsConfig.pressure.api)}).then(t)},callback:function(t){var e=t.data;Object(gt["a"])(this,e)}}},kt=yt,Tt=(n("86c0"),Object(G["a"])(kt,mt,vt,!1,null,"42da69a6",null)),wt=Tt.exports,_t={data:function(){return{buttonShowHtml:"«",buttonShowTitle:"打开",ifOn:!1}},components:{Rain:R,Cloud:F,Radar:Q,Wind:pt,Pressure:wt},computed:{buttonShow:function(){return this.$refs.buttonShow},dialog:function(){return this.$refs.dialog}},methods:{switchDialog:function(){this.ifOn?(this.dialog.style.right="-26em",this.buttonShowHtml="«",this.ifOn=!1):(this.dialog.style.right=0,this.buttonShowHtml="»",this.ifOn=!0)}}},Ot=_t,Ct=(n("8bc2"),Object(G["a"])(Ot,P,S,!1,null,"24ed1dfe",null)),It=Ct.exports,Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"dialog",staticClass:"TyDialog"},[n("button",{ref:"buttonShow",staticClass:"TyDialog-buttonShow",attrs:{title:t.buttonShowTitle},on:{click:t.switchDialog}},[n("span",{domProps:{innerHTML:t._s(t.buttonShowHtml)}})]),n("div",{staticClass:"TyDialog-Content"},[n("ty-table"),n("ty-list")],1)])},St=[],jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"TyDialog-Content-TyTable"},[t._m(0),n("div",{staticClass:"TyDialog-Content-Body"},[n("div",[n("input",{attrs:{type:"checkbox",value:"rain"},domProps:{checked:t.checked24},on:{click:t.is24Checked}}),n("span",[t._v("24小时警戒线")])]),n("div",[n("input",{attrs:{type:"checkbox",value:"rain"},domProps:{checked:t.checked48},on:{click:t.is48Checked}}),n("span",[t._v("48小时警戒线")])]),n("br"),n("div",[n("input",{attrs:{type:"checkbox"},domProps:{checked:t.checkedAnimationRoute},on:{click:t.isAnimationChecked}}),n("span",[t._v("路径动画")])]),n("div",[n("input",{staticClass:"TyDialog-CleBtn",attrs:{type:"button",value:"x"},on:{click:t.cleAllPath}}),n("span",[t._v("路径清空")])])])])},xt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"TyDialog-Content-Title"},[n("span",[t._v("台风")])])}],Et=n("dc2d"),Dt={data:function(){return{checked24:!1,checked48:!1,checkedPath:!1,checkedAnimationRoute:!1,tyPopupStore:{}}},computed:{MapTable:function(){return this.$warehouse.compInstances.MapTablePhone},typhoonDialogObj:function(){return this.$warehouse.compInstances.typhoonDialog}},mounted:function(){this.$warehouse.compInstances.TyphoonTable=this},methods:{is24Checked:function(){this.checked24?(this.checked24=!1,Object(Et["a"])(this,"remove24")):(this.checked24=!0,Object(Et["a"])(this,"cordon24"))},is48Checked:function(){this.checked48?(this.checked48=!1,Object(Et["a"])(this,"remove48")):(this.checked48=!0,Object(Et["a"])(this,"cordon48"))},isAnimationChecked:function(){this.checkedAnimationRoute=!this.checkedAnimationRoute},cleAllPath:function(){var t=this.MapTable.layers.typhoonLayer;if(null!=this.typhoonDialogObj){for(var e in this.typhoonDialogObj.listItems)this.typhoonDialogObj.listItems[e].checked=!1;for(var n in this.typhoonDialogObj.currentItems)this.typhoonDialogObj.currentItems[n].checked=!1;t.getSource().clear(),this.typhoonDialogObj.isTyChecked={};var i=this.typhoonDialogObj.tyOverlay;for(var a in i)i[a].setPosition(void 0),clearInterval(this.typhoonDialogObj.timer[a]);this.typhoonDialogObj.tyOverlay={},this.typhoonDialogObj.timer={};var c=this.tyPopupStore;for(var o in c)c[o].setPosition(void 0);this.tyPopupStore={}}}}},Lt=Dt,$t=(n("1fc5"),Object(G["a"])(Lt,jt,xt,!1,null,"519ecf66",null)),Mt=$t.exports,Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"TyList"},[n("div",{staticClass:"TyList-Head"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.year=e.target.multiple?n:n[0]}}},t._l(t.yearBox,(function(e,i){return n("option",{key:i,domProps:{innerHTML:t._s(e)}})})),0),n("input",{attrs:{type:"button",value:"查询"},on:{click:function(e){return t.searchTyList("history")}}}),n("input",{staticStyle:{width:"5em"},attrs:{type:"button",value:"当前台风"},on:{click:function(e){return t.searchTyList("current")}}}),n("input",{attrs:{type:"button",value:"清空"},on:{click:t.cleTyphoonList}})]),n("div",{ref:"tyList",staticClass:"TyList-List"},[t._l(t.currentItems,(function(e){return n("div",{key:e.tfid,staticClass:"TyList-List-Item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"item.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{click:function(n){return t.createTy(n,e.tfid)},change:function(n){var i=e.checked,a=n.target,c=!!a.checked;if(Array.isArray(i)){var o=null,s=t._i(i,o);a.checked?s<0&&t.$set(e,"checked",i.concat([o])):s>-1&&t.$set(e,"checked",i.slice(0,s).concat(i.slice(s+1)))}else t.$set(e,"checked",c)}}}),n("div",{on:{click:function(n){return t.searchInfo(e.tfid)}}},[t._v(" "+t._s(e.tfid)+" "+t._s(e.name)+" "+t._s(e.enname)+" "+t._s(e.strong)+" "),n("br"),n("i",{staticStyle:{"font-size":"12px"}},[t._v(t._s(e.time))])])])})),t._l(t.listItems,(function(e){return n("div",{key:e.tfid,staticClass:"TyList-List-Item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"item.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{click:function(n){return t.createTy(n,e.tfid)},change:function(n){var i=e.checked,a=n.target,c=!!a.checked;if(Array.isArray(i)){var o=null,s=t._i(i,o);a.checked?s<0&&t.$set(e,"checked",i.concat([o])):s>-1&&t.$set(e,"checked",i.slice(0,s).concat(i.slice(s+1)))}else t.$set(e,"checked",c)}}}),n("div",{on:{click:function(n){return t.searchInfo(e.tfid)}}},[t._v(" "+t._s(e.tfid)+" "+t._s(e.name)+" "+t._s(e.enname)+" "),n("br"),n("i",{staticStyle:{"font-size":"12px"}},[t._v(t._s(e.starttime)+" "+t._s(e.endtime))])])])}))],2)])},Ht=[],Rt=(n("c975"),n("db32")),At=n("de0e"),Vt={data:function(){return{year:"",yearBox:[],currentItems:[],listItems:[],infoItems:[],isTyChecked:{},tyOverlay:{},timer:{},infoLable:"台风详情",isAnimationOn:!1,zoomToPointTimer:null}},computed:{MapTable:function(){return this.$warehouse.compInstances.MapTablePhone},TyphoonTable:function(){return this.$warehouse.compInstances.TyphoonTable},TyphoonInfo:function(){return this.$warehouse.compInstances.TyphoonInfo},tyList:function(){return this.$refs.tyList}},mounted:function(){var t=this;this.$warehouse.compInstances.typhoonDialog=this,this.yearBox=this.getYears(),this.MapTable.map.on("click",(function(e){var n;t.MapTable.map.forEachFeatureAtPixel(e.pixel,(function(t){void 0!==t.id_&&"string"===typeof t.id_&&-1!==t.id_.indexOf("typhoon")&&-1!==t.id_.indexOf("pointIndex")&&-1===t.id_.indexOf("radius")&&(n=t)})),n&&Object(At["a"])(t,n)}))},methods:{getYears:function(){var t=(new Date).getFullYear(),e=[],n=1945;while(t>=n)e.push(t),t--;return e},searchTyList:function(t){var e,n=this,i=this.year;if("current"===t)e=this.$wivsConfig.typhoon.api.current;else{if(""===i)return;e="".concat(this.$wivsConfig.typhoon.api.list,"/").concat(i)}Object(L["a"])(e,(function(e){if(0!==e.length||"current"!==t){if(n.currentItems=[],n.listItems=[],"current"===t)for(var i in e)n.isTyChecked[e[i].tfid]?e[i].checked=!0:e[i].checked=!1,n.currentItems.push(e[i]);else for(var a in e)n.isTyChecked[e[a].tfid]?e[a].checked=!0:e[a].checked=!1,n.listItems.push(e[a]);n.tyList.scrollTop=0}else alert("当前无台风")}))},searchInfo:function(t){var e=this;Object(L["a"])("".concat(this.$wivsConfig.typhoon.api.info,"/").concat(t),(function(t){e.TyphoonInfo.infoItems={id:t[0].tfid,points:t[0].points.reverse()},e.TyphoonInfo.infoLable=t[0].name,e.TyphoonInfo.tyInfoContent.scrollTop=0,e.TyphoonInfo.tyInfo.style.bottom="0"}))},cleTyphoonList:function(){this.currentItems=[],this.listItems=[],this.year=""},createTy:function(t,e){Object(Rt["a"])(this,t,e)}}},Wt=Vt,Jt=(n("4d3f"),Object(G["a"])(Wt,Gt,Ht,!1,null,"b3aa1da6",null)),zt=Jt.exports,Nt={data:function(){return{buttonShowHtml:"«",buttonShowTitle:"打开",ifOn:!1}},components:{TyTable:Mt,TyList:zt},computed:{buttonShow:function(){return this.$refs.buttonShow},dialog:function(){return this.$refs.dialog}},methods:{switchDialog:function(){this.ifOn?(this.dialog.style.right="-26em",this.buttonShowHtml="«",this.ifOn=!1):(this.dialog.style.right=0,this.buttonShowHtml="»",this.ifOn=!0)}}},Bt=Nt,Ft=(n("22af"),Object(G["a"])(Bt,Pt,St,!1,null,"0f809412",null)),Ut=Ft.exports,Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"tyInfo",staticClass:"TyInfo"},[n("label",{domProps:{innerHTML:t._s(t.infoLable)}}),n("div",{staticClass:"TyInfo-Close"},[n("button",{on:{click:t.close}},[t._v("x")])]),n("div",{staticClass:"TyInfo-Info"},[n("div",{staticClass:"TyInfo-Info-Table"},[t._m(0),n("div",{ref:"tyInfoContent",staticClass:"TyInfo-Info-Content"},t._l(t.infoItems.points,(function(e,i){return n("tr",{key:i,staticClass:"TyInfo-Info-Row",on:{click:function(e){return t.zoomToPoi(t.infoItems.id,t.infoItems.points.length-i-1)}}},[n("td",[t._v(t._s(e.time))]),n("td",[t._v(t._s(e.pressure))]),n("td",[t._v(t._s(e.power))]),n("td",[t._v(t._s(e.movespeed))])])})),0)])])])},qt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",{attrs:{cellspacing:"0",cellpadding:"0"}},[n("tr",{staticClass:"TyInfo-Info-tr"},[n("th",[t._v("时间")]),n("th",[t._v("气压")]),n("th",[t._v("风力")]),n("th",[t._v("移速")])])])])}],Zt=n("8c52"),Kt={data:function(){return{infoLable:"",infoItems:[]}},computed:{MapTable:function(){return this.$warehouse.compInstances.MapTablePhone},TyphoonTable:function(){return this.$warehouse.compInstances.TyphoonTable},typhoonDialog:function(){return this.$warehouse.compInstances.typhoonDialog},tyInfo:function(){return this.$refs.tyInfo},tyInfoContent:function(){return this.$refs.tyInfoContent}},mounted:function(){this.$warehouse.compInstances.TyphoonInfo=this},methods:{cleTyphoonInfo:function(){this.infoItems=[],this.infoLable="台风详情"},zoomToPoi:function(t,e){Object(Zt["a"])(this.typhoonDialog,t,e)},close:function(){this.tyInfo.style.bottom="-20em"}}},Qt=Kt,Xt=(n("2d19"),Object(G["a"])(Qt,Yt,qt,!1,null,"2188f204",null)),te=Xt.exports,ee=n("f0ed"),ne=n("7a09"),ie=n("147f"),ae=function(t){var e=t.map;e.addControl(new l["a"]({zoomInTipLabel:"放大",zoomOutTipLabel:"缩小",className:"ol-zoom-custom"})),e.addControl(new u["a"]({units:"metric"})),e.addControl(new h["a"]({className:"ol-mousePosition-custom",projection:"EPSG:4326",undefinedHTML:"未知",coordinateFormat:function(t){return d["f"](t)}}));var n=Object(f["a"])("ol-zoomtoextent-custom"),i=document.createElement("button");i.innerHTML="E",i.title="复位",n.appendChild(i);var a=function(){var n=e.getView();i.onclick=function(){n.animate({center:t.$wivsConfig.map.viewOpt.center,zoom:4,duration:250})}};a();var c=Object(f["a"])("ol-switchcontrol-custom"),o=document.createElement("button");o.innerHTML="S",o.title="切换图层",c.appendChild(o);var s=function(){var e=!1,n=t.layers.vectorLayer,i=t.layers.imageLayer,a=t.layers.markLayer;o.onclick=function(){e=!e,t.currentLayer=!t.currentLayer,n.setVisible(!e),i.setVisible(e),a.setVisible(e)}};s();var r=Object(f["a"])("ol-graticulescontrol-custom"),P=document.createElement("button");P.innerHTML="G",P.title="经纬网",r.appendChild(P);var S=function(){var n=!1,i=t.layers.graticulesLayer;P.onclick=function(){n?(i.setSource(new m["a"]),n=!1):(Object(p["a"])(e,i),n=!0)},e.on("moveend",(function(){n&&Object(p["a"])(e,i)})),e.getView().on("change:resolution",(function(){n&&Object(p["a"])(e,i)}))};S();var j=Object(f["a"])("ol-geolocationcontrol-custom"),x=document.createElement("button");x.innerHTML="L",x.title="定位",j.appendChild(x);var E=function(){var n=new b["a"],i=new b["a"];i.setStyle(new g["c"]({image:new y["a"]({radius:6,fill:new k["a"]({color:"#3399CC"}),stroke:new T["a"]({color:"#fff",width:2})})}));var a=t.layers.geolocationLayer;a.setSource(new m["a"]({features:[n,i]}));var c=new v["a"]({projection:e.getView().getProjection(),tracking:!0,trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}});x.onclick=function(){if(c.getTracking())if(void 0!==c.getPosition()){var t=w["n"](c.getPosition(),"EPSG:3857","EPSG:4326");if(t){var n=Object(_["a"])(t[0],t[1]);e.getView().animate({center:n,zoom:14,duration:3e3})}}else alert("定位失败，无法获取位置");else c.setTracking(!0)},c.on("change:accuracyGeometry",(function(){var t=w["n"](c.getPosition(),"EPSG:3857","EPSG:4326"),e=Object(_["a"])(t[0],t[1]),i=c.getAccuracy();n.setGeometry(new O["a"](e,i))})),c.on("change:position",(function(){var t=w["n"](c.getPosition(),"EPSG:3857","EPSG:4326"),e=Object(_["a"])(t[0],t[1]);i.setGeometry(e?new C["a"](e):null)}))};E();var D=Object(f["a"])("ol-measurecontrol-custom"),L=document.createElement("button");L.innerHTML="〜",L.title="长度";var $=document.createElement("button");$.innerHTML="口",$.title="面积";var M=document.createElement("button");M.innerHTML="×",M.title="清除",D.appendChild(L),D.appendChild($),D.appendChild(M);var G=function(){var n=t.layers.drawLayer,i={draw:null,sketch:null,ifDrawOn:!1,helpTipEle:null,helpTip:null,measureTipEle:{},measureTip:{},drawId:0};L.onclick=function(){Object(ee["a"])(e,n,i,"LineString")},$.onclick=function(){Object(ee["a"])(e,n,i,"Polygon")},M.onclick=function(){for(var t in n.getSource().clear(),null!==i.helpTip&&i.helpTip.setPosition(void 0),i.sketch=null,i.helpTipEle.style.display="none",e.removeInteraction(i.draw),i.measureTip)i.measureTip[t].setPosition(void 0),delete i.measureTip[t];for(var a in i.measureTipEle)null!=i.measureTipEle[a].parentNode&&i.measureTipEle[a].parentNode.removeChild(i.measureTipEle[a]);e.removeInteraction(i.draw),i.drawId=0},e.on("pointermove",(function(t){null!==i.helpTip&&(i.helpTipEle.innerHTML="单击开始绘制",i.helpTip.setPosition(t.coordinate)),null!==i.sketch&&(i.sketch.getGeometry()instanceof ne["a"]?i.helpTipEle.innerHTML="单击继续绘制线<br/>双击结束绘制":i.helpTipEle.innerHTML="单击继续绘制多边形<br/>双击结束绘多边形")})),e.on("dblclick",(function(t){!1===i.ifDrawOn&&Object(ie["a"])(e,t.pixel)}))};G();var H=function(){var t=document.getElementById("mapPhone"),e=document.createElement("div");e.id="Dialog",t.appendChild(e);var n=I["a"].extend(It);(new n).$mount("#Dialog")};H();var R=function(){var t=document.getElementById("mapPhone"),e=document.createElement("div");e.id="TyDialog",t.appendChild(e);var n=I["a"].extend(Ut);(new n).$mount("#TyDialog")};R();var A=function(){var t=document.getElementById("mapPhone"),e=document.createElement("div");e.id="TyInfo",t.appendChild(e);var n=I["a"].extend(te);(new n).$mount("#TyInfo")};A()},ce={data:function(){return{map:null,layers:{},currentLayer:!0}},mounted:function(){this.$warehouse.compInstances.MapTablePhone=this,this.map=Object(s["a"])("mapPhone",this.$wivsConfig.map.viewOpt,this.$wivsConfig.map.controlsOpt,this.$wivsConfig.map.interactionsOpt),Object(r["a"])(this),ae(this)}},oe=ce,se=(n("13be"),Object(G["a"])(oe,c,o,!1,null,"6f688986",null)),re=se.exports,le={components:{MapTable:re}},ue=le,he=Object(G["a"])(ue,i,a,!1,null,null,null);e["default"]=he.exports},fc96:function(t,e,n){"use strict";var i=n("fdb2"),a=n.n(i);a.a},fdb2:function(t,e,n){}}]);
//# sourceMappingURL=chunk-f3b0600a.885898bd.js.map